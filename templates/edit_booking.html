{% extends "base.html" %}

{% block content %}
<div class="glass-card" style="max-width: 600px; margin: 2rem auto;">
    <h1 class="mb-4">Edit Booking #{{ booking.id }}</h1>

    <div class="booking-info mb-4" style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
        <p><strong>Customer:</strong> {{ booking.user.username }} ({{ booking.user.email }})</p>
        <p><strong>Package:</strong> {{ booking.package.name }}</p>
        <p><strong>Package Price:</strong> ₹{{ booking.package.price }} per person</p>
        <p><strong>Original Total:</strong> ₹{{ booking.total_price }}</p>
    </div>

    <form action="{{ url_for('edit_booking', booking_id=booking.id) }}" method="POST">
        <div class="form-group">
            <label for="num_members">Number of Members</label>
            <input type="number" name="num_members" id="num_members" class="form-control"
                value="{{ booking.num_members }}" min="1" required>
            <small class="text-muted">Total price will be automatically updated (Package Price * Members).</small>
        </div>

        <div class="form-group">
            <label for="status">Booking Status</label>
            <select name="status" id="status" class="form-control">
                <option value="Confirmed" {% if booking.status=='Confirmed' %}selected{% endif %}>Confirmed</option>
                <option value="Pending" {% if booking.status=='Pending' %}selected{% endif %}>Pending</option>
                <option value="Cancelled" {% if booking.status=='Cancelled' %}selected{% endif %}>Cancelled</option>
                <option value="Completed" {% if booking.status=='Completed' %}selected{% endif %}>Completed</option>
            </select>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-primary" style="flex: 1;">Update Booking</button>
            <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary"
                style="flex: 1; text-align: center;">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}