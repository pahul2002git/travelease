{% extends "base.html" %}

{% block content %}
<div class="glass-card">
    <h2 class="mb-4">Train Checkout</h2>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3 style="margin: 0;">{{ train.operator }}</h3>
            <p class="text-muted mb-0">{{ train.train_number }} &bull; {{ train.departure_city }} to {{ train.arrival_city }}</p>
        </div>
        <div style="text-align: right;">
            <span class="package-price">&#8377;{{ total }}</span>
            <div class="text-muted" style="font-size: 0.9rem;">Total for {{ travellers }} traveller(s)</div>
        </div>
    </div>

    <form method="POST" action="{{ url_for('train_pay') }}">
        <input type="hidden" name="train_id" value="{{ train.id }}">
        <input type="hidden" name="travel_date" value="{{ travel_date }}">
        <input type="hidden" name="travellers" value="{{ travellers }}">
        <input type="hidden" name="travel_class" value="{{ travel_class }}">

        <div class="glass-card mb-4" style="background: rgba(255,255,255,0.06);">
            <h4 class="mb-3">Booking Summary</h4>
            <div class="row">
                <div class="col-md-6 mb-2">
                    <strong>Route</strong>
                    <div class="text-muted">{{ train.departure_city }} to {{ train.arrival_city }}</div>
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Train</strong>
                    <div class="text-muted">{{ train.operator }} ({{ train.train_number }})</div>
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Travel Date</strong>
                    <div class="text-muted">{{ travel_date }}</div>
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Class</strong>
                    <div class="text-muted">{{ travel_class }}</div>
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Travellers</strong>
                    <div class="text-muted">{{ travellers }}</div>
                </div>
                <div class="col-md-6 mb-2">
                    <strong>Price Per Person</strong>
                    <div class="text-muted">&#8377;{{ per_person }}</div>
                </div>
                <div class="col-12 mt-2">
                    <strong>Total Payable</strong>
                    <div class="text-muted">&#8377;{{ total }}</div>
                </div>
            </div>
        </div>

        <div class="form-group mb-3">
            <label>Travel Date</label>
            <input type="text" class="form-control" value="{{ travel_date }}" readonly>
        </div>
        <div class="form-group mb-3">
            <label>Class</label>
            <input type="text" class="form-control" value="{{ travel_class }}" readonly>
        </div>
        <div class="form-group mb-3">
            <label>Card Number</label>
            <input type="text" name="card_number" class="form-control" placeholder="1234 5678 9012 3456" required>
        </div>
        <div class="form-group mb-4">
            <label>CVV</label>
            <input type="password" name="cvv" class="form-control" placeholder="***" required>
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="checkbox" name="confirm_details" id="confirmTrainDetails" required>
            <label class="form-check-label" for="confirmTrainDetails">
                I confirm the booking details above are correct.
            </label>
        </div>
        <button type="submit" class="btn btn-primary w-100">Pay &#8377;{{ total }}</button>
    </form>
</div>
{% endblock %}
